<script type="text/javascript">
    RED.nodes.registerType('git', {
        category: 'git',
        color: '#555555',
        defaults: {
            name:     { value: "" },
            endpoint: { value: "http://server:8080/ingest", required: true }
        },
        inputs: 1,
        outputs: 1,
        icon: 'font-awesome/fa-git',
        label: function () { return this.name || 'git'; },
        paletteLabel: 'git',
        button: {
            enabled: true,
            onclick: function () {
                var id  = this.id;
                var base = (RED.settings.httpAdminRoot || "/");
                if (base.charAt(base.length-1) !== "/") base += "/";
                var url = base + "git/" + id + "/inject";  // GET sem corpo

                $.ajax({ url: url, type: "GET" });         // <â€” simples e imediato
            }
        }
    });
</script>
